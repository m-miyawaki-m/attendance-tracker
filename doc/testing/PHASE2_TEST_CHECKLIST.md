# Phase 2 テストチェックリスト

## 概要

| 対象 | テストID範囲 | 推定テスト数 | 実装テスト数 | 状態 |
|------|-------------|--------------|--------------|------|
| LoginView.vue | LV-001〜LV-015 | 15 | 15 | ✅完了 |
| userStore.ts | US-001〜US-026 | 26 | 26 | ✅完了 |
| TeamView.vue | TV-001〜TV-029 | 29 | 29 | ✅完了 |
| EmployeeListView.vue | EL-001〜EL-017 | 17 | 17 | ✅完了 |
| useLogger.ts | UL-001〜UL-025 | 25 | 25 | ✅完了 |
| adminAttendanceStore.ts | AAS-001〜AAS-026 | 26 | 26 | ✅完了 |
| **--- 既存テスト統合 ---** | - | - | - | - |
| mockData.ts | MD-001〜MD-018 | 18 | 18 | ✅完了 |
| auth.ts（モック版） | AUTH-001〜AUTH-009 | 9 | 9 | ✅完了 |
| logger.ts | LOG-001〜LOG-017 | 17 | 17 | ✅完了 |
| App.vue | APP-001〜APP-004 | 4 | 4 | ✅完了 |
| MainLayout.vue | ML-001〜ML-017 | 17 | 17 | ✅完了 |
| **合計** | - | **203** | **203** | ✅完了 |

---

## 1. LoginView.vue テストチェックリスト

### 1.1 初期表示テスト

| テストID | テストケース | 状態 |
|----------|--------------|------|
| LV-001 | フォーム要素表示 | [x] |
| LV-002 | テストアカウントチップ表示 | [x] |
| LV-003 | 初期値 | [x] |

### 1.2 テストアカウント入力テスト

| テストID | テストケース | 状態 |
|----------|--------------|------|
| LV-004 | 管理者アカウント選択 | [x] |
| LV-005 | user01アカウント選択 | [x] |
| LV-006 | user02アカウント選択 | [x] |

### 1.3 ログイン処理テスト

| テストID | テストケース | 状態 |
|----------|--------------|------|
| LV-007 | ログイン成功（一般ユーザー） | [x] |
| LV-008 | ログイン成功（管理者） | [x] |
| LV-009 | ログイン失敗（認証エラー） | [x] |
| LV-010 | ログイン失敗（例外） | [x] |
| LV-011 | ローディング状態 | [x] |

### 1.4 パスワードリセットテスト

| テストID | テストケース | 状態 |
|----------|--------------|------|
| LV-012 | パスワードリセットボタン | [x] |

### 1.5 スナックバー表示テスト

| テストID | テストケース | 状態 |
|----------|--------------|------|
| LV-013 | 成功メッセージ | [x] |
| LV-014 | エラーメッセージ | [x] |
| LV-015 | 情報メッセージ | [x] |

---

## 2. userStore.ts テストチェックリスト

### 2.1 State初期値テスト

| テストID | テストケース | 状態 |
|----------|--------------|------|
| US-001 | users初期値 | [x] |
| US-002 | loading初期値 | [x] |
| US-003 | lastFetched初期値 | [x] |
| US-004 | error初期値 | [x] |

### 2.2 Getters テスト

| テストID | テストケース | 状態 |
|----------|--------------|------|
| US-005 | employees - 従業員フィルタリング | [x] |
| US-006 | employees - 従業員なし | [x] |
| US-007 | admins - 管理者フィルタリング | [x] |
| US-008 | managers - 主任フィルタリング | [x] |
| US-009 | managers - 主任なし | [x] |
| US-010 | managers - adminの主任除外 | [x] |
| US-011 | usersByDepartment - 部署グループ化 | [x] |
| US-012 | usersByDepartment - 空データ | [x] |

### 2.3 fetchUsers アクション テスト

| テストID | テストケース | 状態 |
|----------|--------------|------|
| US-013 | 初回取得成功 | [x] |
| US-014 | キャッシュ利用 | [x] |
| US-015 | キャッシュ期限切れ | [x] |
| US-016 | 強制リフレッシュ | [x] |
| US-017 | Firestoreエラー | [x] |
| US-018 | loading状態 | [x] |
| US-019 | データマッピング | [x] |
| US-020 | Timestamp変換 | [x] |

### 2.4 getUserById アクション テスト

| テストID | テストケース | 状態 |
|----------|--------------|------|
| US-021 | ユーザー存在 | [x] |
| US-022 | ユーザー不在 | [x] |

### 2.5 getTeamMembers アクション テスト

| テストID | テストケース | 状態 |
|----------|--------------|------|
| US-023 | チームメンバー取得 | [x] |
| US-024 | チームメンバーなし | [x] |
| US-025 | adminは除外 | [x] |

### 2.6 clearCache アクション テスト

| テストID | テストケース | 状態 |
|----------|--------------|------|
| US-026 | キャッシュクリア | [x] |

---

## 3. TeamView.vue テストチェックリスト

### 3.1 初期表示テスト

| テストID | テストケース | 状態 |
|----------|--------------|------|
| TV-001 | タイトル表示 | [x] |
| TV-002 | 日付初期値 | [x] |
| TV-003 | 主任未選択時 | [x] |
| TV-004 | 主任セレクト | [x] |

### 3.2 初期データ取得テスト

| テストID | テストケース | 状態 |
|----------|--------------|------|
| TV-005 | ユーザー取得 | [x] |
| TV-006 | 勤怠取得 | [x] |
| TV-007 | 並列実行 | [x] |
| TV-008 | エラーハンドリング | [x] |

### 3.3 日付変更テスト

| テストID | テストケース | 状態 |
|----------|--------------|------|
| TV-009 | 日付変更時の再取得 | [x] |
| TV-010 | ログ出力 | [x] |

### 3.4 主任選択テスト

| テストID | テストケース | 状態 |
|----------|--------------|------|
| TV-011 | 主任選択時のログ | [x] |
| TV-012 | 主任選択解除 | [x] |

### 3.5 主任リストテスト

| テストID | テストケース | 状態 |
|----------|--------------|------|
| TV-013 | 主任フィルタリング | [x] |
| TV-014 | ラベル形式 | [x] |

### 3.6 選択主任名テスト

| テストID | テストケース | 状態 |
|----------|--------------|------|
| TV-015 | 主任未選択 | [x] |
| TV-016 | 主任選択済み | [x] |

### 3.7 チーム勤怠リストテスト

| テストID | テストケース | 状態 |
|----------|--------------|------|
| TV-017 | 主任未選択 | [x] |
| TV-018 | チームメンバー取得 | [x] |
| TV-019 | 勤怠データマッピング | [x] |
| TV-020 | 勤怠データなし | [x] |
| TV-021 | 勤務時間計算 | [x] |
| TV-022 | 勤務時間なし | [x] |

### 3.8 チームサマリーテスト

| テストID | テストケース | 状態 |
|----------|--------------|------|
| TV-023 | 総メンバー数 | [x] |
| TV-024 | 正常出勤数 | [x] |
| TV-025 | 遅刻・早退数 | [x] |
| TV-026 | 欠勤数 | [x] |

### 3.9 サマリーカード表示テスト

| テストID | テストケース | 状態 |
|----------|--------------|------|
| TV-027 | 主任選択時 | [x] |
| TV-028 | 主任未選択時 | [x] |

### 3.10 ヘルパー関数テスト

| テストID | テストケース | 状態 |
|----------|--------------|------|
| TV-029 | formatTime | [x] |

---

## 4. EmployeeListView.vue テストチェックリスト

### 4.1 初期表示テスト

| テストID | テストケース | 状態 |
|----------|--------------|------|
| EL-001 | 月選択フィールド | [x] |
| EL-002 | ヘッダー表示 | [x] |
| EL-003 | テーブルヘッダー | [x] |

### 4.2 データ取得テスト

| テストID | テストケース | 状態 |
|----------|--------------|------|
| EL-004 | ユーザー取得 | [x] |
| EL-005 | 勤怠取得 | [x] |
| EL-006 | ローディング状態 | [x] |

### 4.3 月選択変更テスト

| テストID | テストケース | 状態 |
|----------|--------------|------|
| EL-007 | 月変更時の再取得 | [x] |
| EL-008 | 日付範囲計算 | [x] |

### 4.4 従業員リスト計算テスト

| テストID | テストケース | 状態 |
|----------|--------------|------|
| EL-009 | 従業員フィルタリング | [x] |
| EL-010 | 勤怠ステータス集計 | [x] |
| EL-011 | ステータス初期値 | [x] |
| EL-012 | 社員番号表示 | [x] |

### 4.5 テーブル表示テスト

| テストID | テストケース | 状態 |
|----------|--------------|------|
| EL-013 | 社員番号 | [x] |
| EL-014 | 名前 | [x] |
| EL-015 | 役職 | [x] |

### 4.6 ページネーションテスト

| テストID | テストケース | 状態 |
|----------|--------------|------|
| EL-016 | デフォルト表示件数 | [x] |
| EL-017 | ページ切り替え | [x] |

---

## 5. useLogger.ts テストチェックリスト

### 5.1 初期化テスト

| テストID | テストケース | 状態 |
|----------|--------------|------|
| UL-001 | 初期ログ読み込み | [x] |
| UL-002 | リスナー登録 | [x] |

### 5.2 State テスト

| テストID | テストケース | 状態 |
|----------|--------------|------|
| UL-003 | logs | [x] |
| UL-004 | isLoading | [x] |

### 5.3 refreshLogs 関数テスト

| テストID | テストケース | 状態 |
|----------|--------------|------|
| UL-005 | ログ再読み込み | [x] |

### 5.4 logCount computed テスト

| テストID | テストケース | 状態 |
|----------|--------------|------|
| UL-006 | 件数取得 | [x] |
| UL-007 | 空の場合 | [x] |
| UL-008 | リアクティブ更新 | [x] |

### 5.5 logSizeFormatted computed テスト

| テストID | テストケース | 状態 |
|----------|--------------|------|
| UL-009 | バイト表示 | [x] |
| UL-010 | KB表示 | [x] |
| UL-011 | MB表示 | [x] |
| UL-012 | リアクティブ更新 | [x] |

### 5.6 clear 関数テスト

| テストID | テストケース | 状態 |
|----------|--------------|------|
| UL-013 | クリア実行 | [x] |

### 5.7 downloadJson 関数テスト

| テストID | テストケース | 状態 |
|----------|--------------|------|
| UL-014 | JSONダウンロード | [x] |

### 5.8 downloadText 関数テスト

| テストID | テストケース | 状態 |
|----------|--------------|------|
| UL-015 | テキストダウンロード | [x] |

### 5.9 filterByLevel 関数テスト

| テストID | テストケース | 状態 |
|----------|--------------|------|
| UL-016 | 全て | [x] |
| UL-017 | errorのみ | [x] |
| UL-018 | infoのみ | [x] |

### 5.10 searchLogs 関数テスト

| テストID | テストケース | 状態 |
|----------|--------------|------|
| UL-019 | 空文字 | [x] |
| UL-020 | メッセージ検索 | [x] |
| UL-021 | データ検索 | [x] |
| UL-022 | 大文字小文字無視 | [x] |

### 5.11 logger インスタンステスト

| テストID | テストケース | 状態 |
|----------|--------------|------|
| UL-023 | エクスポート | [x] |

### 5.12 ライフサイクルテスト

| テストID | テストケース | 状態 |
|----------|--------------|------|
| UL-024 | アンマウント時 | [x] |
| UL-025 | リスナー自動更新 | [x] |

---

## 6. adminAttendanceStore.ts テストチェックリスト

### 6.1 State初期値テスト

| テストID | テストケース | 状態 |
|----------|--------------|------|
| AAS-001 | attendancesByDate初期値 | [x] |
| AAS-002 | loading初期値 | [x] |
| AAS-003 | error初期値 | [x] |

### 6.2 Getters テスト

| テストID | テストケース | 状態 |
|----------|--------------|------|
| AAS-004 | cachedDates - 初期状態 | [x] |
| AAS-005 | cachedDates - キャッシュあり | [x] |
| AAS-006 | totalCachedRecords - 初期状態 | [x] |
| AAS-007 | totalCachedRecords - キャッシュあり | [x] |

### 6.3 fetchAttendancesByDate アクション テスト

| テストID | テストケース | 状態 |
|----------|--------------|------|
| AAS-008 | 初回取得成功 | [x] |
| AAS-009 | キャッシュ利用 | [x] |
| AAS-010 | loading状態 | [x] |
| AAS-011 | Firestoreエラー | [x] |
| AAS-012 | データマッピング | [x] |
| AAS-013 | 位置情報なしデータ | [x] |

### 6.4 fetchAttendancesByDateRange アクション テスト

| テストID | テストケース | 状態 |
|----------|--------------|------|
| AAS-014 | 日付範囲取得成功 | [x] |
| AAS-015 | ユーザーID指定 | [x] |
| AAS-016 | loading状態 | [x] |
| AAS-017 | Firestoreエラー | [x] |

### 6.5 getAttendancesByDateFromCache アクション テスト

| テストID | テストケース | 状態 |
|----------|--------------|------|
| AAS-018 | キャッシュあり | [x] |
| AAS-019 | キャッシュなし | [x] |

### 6.6 getUserAttendanceByDate アクション テスト

| テストID | テストケース | 状態 |
|----------|--------------|------|
| AAS-020 | データあり | [x] |
| AAS-021 | 日付キャッシュなし | [x] |
| AAS-022 | ユーザーデータなし | [x] |

### 6.7 clearCache アクション テスト

| テストID | テストケース | 状態 |
|----------|--------------|------|
| AAS-023 | 特定日付クリア | [x] |
| AAS-024 | 全キャッシュクリア | [x] |
| AAS-025 | エラーもクリア | [x] |

### 6.8 refreshAttendances アクション テスト

| テストID | テストケース | 状態 |
|----------|--------------|------|
| AAS-026 | 強制再取得 | [x] |

---

## 7. mockData.ts テストチェックリスト（既存テスト統合）

### 7.1 mockUsers テスト

| テストID | テストケース | 状態 |
|----------|--------------|------|
| MD-001 | 正しい数のユーザーが存在する | [x] |
| MD-002 | 管理者ユーザーが存在する | [x] |
| MD-003 | 一般従業員が存在する | [x] |
| MD-004 | 全てのユーザーに必須フィールドが存在する | [x] |

### 7.2 mockAttendances テスト

| テストID | テストケース | 状態 |
|----------|--------------|------|
| MD-005 | 打刻データが存在する | [x] |
| MD-006 | 全ての打刻データに必須フィールドが存在する | [x] |
| MD-007 | 位置情報が正しい形式である | [x] |
| MD-008 | 退勤済みの打刻データは退勤情報を持つ | [x] |

### 7.3 mockChartData テスト

| テストID | テストケース | 状態 |
|----------|--------------|------|
| MD-009 | 出勤率データが存在する | [x] |
| MD-010 | 平均勤務時間データが存在する | [x] |
| MD-011 | 遅刻・早退データが存在する | [x] |
| MD-012 | 部署別出勤状況データが存在する | [x] |

### 7.4 mockSummary テスト

| テストID | テストケース | 状態 |
|----------|--------------|------|
| MD-013 | サマリーデータが正しい型である | [x] |
| MD-014 | 出勤率が0-100の範囲内である | [x] |

### 7.5 statusConfig テスト

| テストID | テストケース | 状態 |
|----------|--------------|------|
| MD-015 | 全てのステータスが定義されている | [x] |
| MD-016 | 各ステータスにテキストとカラーが存在する | [x] |

### 7.6 departments テスト

| テストID | テストケース | 状態 |
|----------|--------------|------|
| MD-017 | 部署リストが存在する | [x] |
| MD-018 | 全ての部署が文字列である | [x] |

---

## 8. auth.ts（モック版）テストチェックリスト（既存テスト統合）

### 8.1 初期状態テスト

| テストID | テストケース | 状態 |
|----------|--------------|------|
| AUTH-001 | 初期状態は未認証 | [x] |

### 8.2 ログイン処理テスト

| テストID | テストケース | 状態 |
|----------|--------------|------|
| AUTH-002 | 一般従業員でログインできる | [x] |
| AUTH-003 | 管理者でログインできる | [x] |
| AUTH-004 | 存在しないユーザーはログインできない | [x] |

### 8.3 ログアウト処理テスト

| テストID | テストケース | 状態 |
|----------|--------------|------|
| AUTH-005 | ログアウトできる | [x] |

### 8.4 LocalStorage永続化テスト

| テストID | テストケース | 状態 |
|----------|--------------|------|
| AUTH-006 | ログイン情報がLocalStorageに保存される | [x] |
| AUTH-007 | LocalStorageから認証状態を復元できる | [x] |

### 8.5 Computed値テスト

| テストID | テストケース | 状態 |
|----------|--------------|------|
| AUTH-008 | computed値が正しく計算される | [x] |

### 8.6 オプションテスト

| テストID | テストケース | 状態 |
|----------|--------------|------|
| AUTH-009 | rememberMeオプションが機能する | [x] |

---

## 9. logger.ts テストチェックリスト（既存テスト統合）

### 9.1 基本機能テスト

| テストID | テストケース | 状態 |
|----------|--------------|------|
| LOG-001 | シングルトンインスタンス | [x] |
| LOG-002 | infoログ出力 | [x] |
| LOG-003 | warnログ出力 | [x] |
| LOG-004 | errorログ出力 | [x] |
| LOG-005 | debugログ出力 | [x] |

### 9.2 データ付きログテスト

| テストID | テストケース | 状態 |
|----------|--------------|------|
| LOG-006 | データ付きログ | [x] |
| LOG-007 | オブジェクトデータ | [x] |
| LOG-008 | 配列データ | [x] |

### 9.3 ログ管理テスト

| テストID | テストケース | 状態 |
|----------|--------------|------|
| LOG-009 | ログクリア | [x] |
| LOG-010 | ログ取得 | [x] |
| LOG-011 | ログサイズ取得 | [x] |

### 9.4 リスナーテスト

| テストID | テストケース | 状態 |
|----------|--------------|------|
| LOG-012 | リスナー登録 | [x] |
| LOG-013 | リスナー解除 | [x] |
| LOG-014 | 複数リスナー | [x] |

### 9.5 エクスポートテスト

| テストID | テストケース | 状態 |
|----------|--------------|------|
| LOG-015 | JSONエクスポート | [x] |
| LOG-016 | テキストエクスポート | [x] |
| LOG-017 | ログフィルタリング | [x] |

---

## 10. App.vue テストチェックリスト（既存テスト統合）

### 10.1 初期化テスト

| テストID | テストケース | 状態 |
|----------|--------------|------|
| APP-001 | 認証リスナー初期化 | [x] |

### 10.2 レイアウト設定テスト

| テストID | テストケース | 状態 |
|----------|--------------|------|
| APP-002 | ログインページ（layoutConfig=null） | [x] |
| APP-003 | 管理者ページ（showSidebar=true） | [x] |
| APP-004 | 一般ユーザーホーム（showTabs=true） | [x] |

---

## 11. MainLayout.vue テストチェックリスト（既存テスト統合）

### 11.1 表示制御テスト（props）

| テストID | テストケース | 状態 |
|----------|--------------|------|
| ML-001 | ヘッダー表示 | [x] |
| ML-002 | ヘッダー非表示 | [x] |
| ML-003 | サイドバー表示 | [x] |
| ML-004 | サイドバー非表示 | [x] |
| ML-005 | フッター表示 | [x] |
| ML-006 | フッター非表示 | [x] |
| ML-007 | タブ表示 | [x] |
| ML-008 | タブ非表示 | [x] |

### 11.2 認証状態テスト

| テストID | テストケース | 状態 |
|----------|--------------|------|
| ML-009 | ログイン状態 | [x] |
| ML-010 | 未ログイン状態 | [x] |

### 11.3 ユーザー権限テスト

| テストID | テストケース | 状態 |
|----------|--------------|------|
| ML-011 | 一般ユーザータブ | [x] |
| ML-012 | 管理者タブ | [x] |

### 11.4 ユーザーインタラクションテスト

| テストID | テストケース | 状態 |
|----------|--------------|------|
| ML-013 | ログアウト成功 | [x] |
| ML-014 | ログアウト失敗 | [x] |
| ML-015 | サイドバー開閉 | [x] |

### 11.5 内部ロジックテスト

| テストID | テストケース | 状態 |
|----------|--------------|------|
| ML-016 | フッターの年表示 | [x] |
| ML-017 | スナックバー表示 | [x] |

---

## 備考

- テストID（LV-XXX、US-XXX、TV-XXX、EL-XXX、UL-XXX、AAS-XXX、MD-XXX、AUTH-XXX、LOG-XXX、APP-XXX、ML-XXX）はROADMAP.mdと統一
- 状態: [ ] = 未実装、[x] = 実装済み
- Phase 2新規テスト数: 138
- 既存テスト統合: 65（mockData:18 + auth:9 + logger:17 + App:4 + MainLayout:17）
- 合計テスト関数数: 203
- 実装完了: 2026-01-13
- 全テスト: 343テスト（Phase1: 140 + Phase2: 203）
